지라 오토메이션 기능을 활용한 지라-깃허브 양방향 통합 구현

발표자: 김동섭


--------------------------------------------------------------------------------


발표 주제

Jira에 내장된 오토메이션(Automation Rules) 기능을 활용하여, Jira와 GitHub 간의 태스크 관리 정보를 양방향으로 자동 통합하는 시스템을 구축한 사례를 공유합니다.


--------------------------------------------------------------------------------


요약

본 프로젝트는 Jira에서 스토리, 태스크, 버그 등의 이슈를 생성하면 GitHub에 관련 이슈와 브랜치를 자동으로 생성하고, 반대로 GitHub에서 해당 브랜치가 메인(main) 브랜치에 병합(merge)될 때 Jira 이슈의 상태를 '완료(Done)'로 자동 변경하는 양방향 통합 시스템 구현을 목표로 합니다.

구현의 핵심은 Jira의 오토메이션 기능으로 특정 트리거(예: 이슈 생성) 발생 시 웹 요청(Webhook)을 통해 JSON 형식의 데이터를 GitHub Actions의 엔드포인트로 전송하는 것입니다. GitHub Actions는 이 데이터를 받아 사전에 정의된 마크다운(Markdown) 템플릿에 매핑하여, 가독성이 뛰어난 GitHub 이슈를 생성합니다.

프로젝트 진행 중 Jira의 '설명(Description)' 필드가 비동기적으로 처리되어 데이터가 누락되는 문제와 오토메이션 기능이 개인 레포지토리를 지원하지 않는 제약사항을 발견했으며, '이슈 변경' 트리거를 추가하고 조직(Organization) 계정을 활용하여 이를 해결했습니다.


--------------------------------------------------------------------------------


발표 내용

1. 프로젝트 목표 및 범위

초기 기획은 Jira, GitHub, Slack 세 가지 플랫폼의 연동이었으나, 현재 Slack 알람 연동 기능은 구현되지 않았습니다. 현재 구현된 핵심 목표는 다음과 같습니다.

* Jira → GitHub 자동화:
  * Jira에서 새로운 스토리(Story), 태스크(Task), 버그(Bug)가 생성될 때, GitHub에 자동으로 해당 이슈(Issue)와 개발 브랜치(Branch)를 생성합니다.
* GitHub → Jira 자동화:
  * GitHub에서 특정 이슈와 연관된 브랜치가 메인 브랜치에 병합(merge)되면, Jira에 있는 해당 이슈의 상태를 자동으로 '완료(Done)'로 변경합니다.

제외된 기능

초기에는 Jira와 GitHub 이슈 내용이 어느 한쪽에서 변경될 때 다른 쪽에도 동기화하는 기능을 고려했으나, 관리의 일관성을 위해 모든 이슈 내용 수정은 Jira에서만 수행하는 것으로 정책을 정하고 해당 기능은 구현 범위에서 제외했습니다. 이를 통해 Jira를 프로젝트 관리의 단일 진실 공급원(Single Source of Truth)으로 삼았습니다.

2. 기술 스택 및 구현 흐름

시스템은 Jira와 GitHub의 기본 기능을 최대한 활용하여 구축되었습니다.

* 주요 기술:
  * Jira Automation Rules: Jira 내부에서 제공하는 워크플로우 자동화 기능. GUI 기반으로 트리거, 조건, 액션을 설정할 수 있습니다.
  * GitHub Actions: GitHub에서 제공하는 CI/CD 및 자동화 도구. 외부 웹 요청(repository_dispatch 이벤트)을 통해 워크플로우를 실행합니다.
  * Jira Custom Fields: Jira와 GitHub 이슈를 1:1로 매핑하고 추적하기 위해 커스텀 필드를 생성하여 활용했습니다.
* 작동 흐름:
  1. Jira 이슈 생성: 사용자가 Jira에서 스토리, 태스크, 버그 등 새로운 이슈를 생성합니다.
  2. 오토메이션 트리거: '이슈 생성' 이벤트를 감지한 Jira 오토메이션 룰이 실행됩니다.
  3. 웹 요청 전송: 오토메이션 룰은 이슈 데이터를 담은 JSON 페이로드를 GitHub Actions의 특정 엔드포인트로 웹 요청(Webhook)을 통해 전송합니다.
  4. GitHub Actions 실행: 웹 요청을 받은 GitHub Actions 워크플로우가 트리거됩니다.
  5. GitHub 이슈 및 브랜치 생성: 워크플로우 내부 스크립트가 JSON 데이터를 파싱하여 사전에 정의된 마크다운 템플릿에 적용하고, 이를 기반으로 가독성 높은 GitHub 이슈와 필요시 브랜치를 생성합니다.

3. 세부 구현 내용

Jira 티켓의 종류에 따라 GitHub에서의 자동화 동작을 다르게 설정하여 업무의 성격을 명확히 구분했습니다.

* Jira 티켓 유형 및 GitHub 연동 규칙
  * 피처, 리펙터, 문서화는 별도의 티켓 유형이 아닌, **레이블(Label)**로 구분하여 티켓 유형의 무분별한 증가를 방지했습니다.

Jira 유형 (레이블)	GitHub 연동	설명
스토리 (Story)	이슈만 생성	대분류 또는 중분류 개념으로, 실제 개발 작업 단위가 아니라고 판단하여 브랜치는 생성하지 않습니다.
태스크 (피처, 리펙터, 문서화)	이슈 및 브랜치 생성	기능 개발, 코드 개선, 문서 작성 등 실제 개발 작업을 의미합니다.
버그 (Bug)	이슈 및 브랜치 생성	발생한 버그를 수정하기 위한 작업을 의미합니다.

4. 문제 해결 과정

자동화 시스템을 구축하며 몇 가지 기술적 문제에 직면했으며, 다음과 같이 해결했습니다.

* 문제 1: GitHub 이슈의 가독성 저하
  * 현상: 초기에는 Jira 오토메이션에서 GitHub API로 직접 JSON 데이터를 전송하여 이슈를 생성했습니다. 이 방식은 이슈 본문에 포맷팅되지 않은 순수 JSON 텍스트가 그대로 노출되어 가독성이 매우 떨어지는 문제를 야기했습니다.
  * 해결: GitHub Actions의 repository_dispatch 이벤트를 트리거하는 방식으로 변경했습니다. Jira는 데이터만 던져주고, GitHub Actions가 이를 받아 사전에 정의된 마크다운 템플릿에 맞춰 가독성 높은 이슈를 생성하도록 역할을 분리했습니다.
* 문제 2: Jira 오토메이션 기능의 제약사항
  * 제약 1 (지원 범위): Jira 오토메이션의 웹 요청 기능은 개인 레포지토리를 지원하지 않습니다. 반드시 조직(Organization) 계정 하위의 레포지토리여야 합니다.
  * 제약 2 (데이터 누락): Jira의 '설명(Description)' 필드는 비동기적으로 처리됩니다. 이로 인해 '이슈 생성' 트리거가 실행되는 시점에는 설명 필드의 값이 비어있어, 생성된 GitHub 이슈에 설명이 누락되는 문제가 발생했습니다.
  * 해결: '이슈 변경' 트리거를 추가로 활용했습니다. 사용자가 이슈를 생성한 뒤 설명을 입력하면 '변경' 이벤트가 발생하며, 이 때 업데이트된 설명 데이터를 GitHub 이슈에 반영하도록 워크플로우를 보완했습니다.


--------------------------------------------------------------------------------


결론

Jira 오토메이션과 GitHub Actions를 연동하여 개발자와 기획자가 사용하는 각기 다른 플랫폼의 정보를 자동으로 동기화하는 효율적인 시스템을 구축했습니다. 이 시스템을 통해 Jira에서 태스크를 생성하는 것만으로 GitHub의 이슈 및 브랜치 생성이 자동으로 이루어지고, 개발 완료 후 브랜치를 병합하면 Jira의 태스크가 자동으로 종결되는 매끄러운 워크플로우를 완성했습니다.

특히, 가독성 문제와 Jira의 비동기 처리 및 기능적 제약사항들을 해결하는 과정에서 보다 견고하고 실용적인 자동화 파이프라인을 설계할 수 있었습니다.


--------------------------------------------------------------------------------


QnA

제공된 발표 내용에서는 별도의 질의응답 세션이 없었습니다.
